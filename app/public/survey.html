<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <title>Friend Finder- Survey</title>
  </head>
  <body>
    <div class="container">
      <h1>Survey Questions</h1>
      <hr />
      <h3>About You</h3>
      <h5>Name</h5>
      <form action="" method="POST" role="form">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            id="friendName"
            placeholder="Name (Required)"
            required
          />
        </div>
      </form>
      <h5>Link to Photo Image</h5>
      <form action="" method="POST" role="form">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            id="photo"
            placeholder="Photo Image Link (Required)"
            required
          />
        </div>
      </form>
      <hr />

      <form>
        <h3>Question 1</h3>
        <h5>You consider people-watching a sport.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q1">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q1">Options</label>
          </div>
        </div>

        <h3>Question 2</h3>
        <h5>You prefer a night alone watching a movie to a concert.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q2">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q2">Options</label>
          </div>
        </div>

        <h3>Question 3</h3>
        <h5>You find it easy to relax in a crowd.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q3">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q3">Options</label>
          </div>
        </div>

        <h3>Question 4</h3>
        <h5>You enjoy exploring new places and foods.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q4">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q4">Options</label>
          </div>
        </div>

        <h3>Question 5</h3>
        <h5>Binge-watching is one of your favorite activities.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q5">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q5">Options</label>
          </div>
        </div>

        <h3>Question 6</h3>
        <h5>You prefer to take a risk than be stuck in a routine.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q6">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q6">Options</label>
          </div>
        </div>

        <h3>Question 7</h3>
        <h5>You enjoy discussing politics.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q7">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q7">Options</label>
          </div>
        </div>

        <h3>Question 8</h3>
        <h5>You like to travel.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q8">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q8">Options</label>
          </div>
        </div>

        <h3>Question 9</h3>
        <h5>You like to read.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q9">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q9">Options</label>
          </div>
        </div>

        <h3>Question 10</h3>
        <h5>The mall is one of your favorite places.</h5>
        <div class="input-group mb-3">
          <select class="custom-select" id="q10">
            <option selected>Choose...</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
          <div class="input-group-append">
            <label class="input-group-text" for="q10">Options</label>
          </div>
        </div>
        <input
          id="submit"
          class="btn btn-primary"
          type="submit"
          value="Submit"
        />
      </form>
      <div id="bestFriendModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h3 class="modal-title">Your New Best Friend</h1>
            </div>
            <div class="modal-body">
              <h2 id="bestFriend"></h2>
              <img id="bestFriendPhoto" src="#">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="container">
        <hr />
        <a href="/api/friends">API Friends List</a> |
        <a href="https://github.com/beccashieh/FriendFinder">Github Repo</a>
        </div>
    </footer>


    


    <!-- jQuery-->
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>

    <!--Bootstrap-->
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <!--Logic-->
    <script type="text/javascript">
            $("#submit").on("click", function() {
              event.preventDefault();

              //Form Validation
              var valid = true;

              if ($("#name").val() === "" || $("#photo").val() === "") {
                valid = false;
              } else if (
                $("#q1").val() === "empty" ||
                $("#q2").val() === "empty" ||
                $("#q3").val() === "empty" ||
                $("#q4").val() === "empty" ||
                $("#q5").val() === "empty" ||
                $("#q6").val() === "empty" ||
                $("#q7").val() === "empty" ||
                $("#q8").val() === "empty" ||
                $("#q9").val() === "empty" ||
                $("#q10").val() === "empty"
              ) {
                valid = false;
              }

              if (valid === true) {
                const test = [];

                const scores = [
                    $("#q1").val().trim(),
                    $("#q2").val().trim(),
                    $("#q3").val().trim(),
                    $("#q4").val().trim(),
                    $("#q5").val().trim(),
                    $("#q6").val().trim(),
                    $("#q7").val().trim(),
                    $("#q8").val().trim(),
                    $("#q9").val().trim(),
                    $("#q10").val().trim()
                  ];

                  scores.forEach(function(score) {
                    test.push(score)
                  })

                var newFriend = {
                  name: $("#friendName")
                    .val()
                    .trim(),
                  photo: $("#photo")
                    .val()
                    .trim(),
                    scores: test
                  
                };
                console.log(newFriend);
                

                  $.post("/api/friends", newFriend).then(function(data) {
                    $("#bestFriend").text(data.name);
                    $("#bestFriendPhoto").attr("src", data.photo);
                    $("#bestFriendModal").modal("toggle");
                  });
                }
                else {
                  alert("The survey is not complete! Please complete all entries.")
                }
            });
    </script>
  </body>
</html>
